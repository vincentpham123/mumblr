{"ast":null,"code":"// example of slice of state for a user\n// {\n//     user: {\n//       id,\n//       email,\n//       username,\n//       createdAt,\n//       updatedAt\n//     }\n//   }\nconst SET_CURRENT_USER = 'session/setCurrentUser';\nconst REMOVE_CURRENT_USER = 'session/removeCurrentUser';\nimport csrfFetch from \"./csrf\";\nexport const createSession = user => {\n  return {\n    type: NEWSESSION,\n    payload: user\n  };\n};\nexport const removeSession = userId => {\n  return {\n    type: DELETESESSION,\n    userId\n  };\n};\nexport const login = user => async dispatch => {\n  const {\n    credential,\n    password\n  } = user;\n  const response = await csrfFetch('./api/session', {\n    method: \"POST\",\n    body: JSON.stringify({\n      credential,\n      password\n    })\n  });\n  const data = await response.json();\n  dispatch(createSession(data.user));\n  return response;\n};\nconst initialState = {\n  user: null\n};\nconst sessionReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case SET_CURRENT_USER:\n      return {\n        ...state,\n        user: action.payload\n      };\n    case REMOVE_CURRENT_USER:\n      return {\n        ...state,\n        user: null\n      };\n    default:\n      return storeCSRFToken;\n  }\n};\nexport default sessionReducer;","map":{"version":3,"names":["SET_CURRENT_USER","REMOVE_CURRENT_USER","csrfFetch","createSession","user","type","NEWSESSION","payload","removeSession","userId","DELETESESSION","login","dispatch","credential","password","response","method","body","JSON","stringify","data","json","initialState","sessionReducer","state","arguments","length","undefined","action","storeCSRFToken"],"sources":["/Users/vincentpham/Documents/GitHub/fullstack/frontend_react/frontend/src/store/session.js"],"sourcesContent":["// example of slice of state for a user\n// {\n//     user: {\n//       id,\n//       email,\n//       username,\n//       createdAt,\n//       updatedAt\n//     }\n//   }\nconst SET_CURRENT_USER = 'session/setCurrentUser';\nconst REMOVE_CURRENT_USER = 'session/removeCurrentUser';\nimport csrfFetch from \"./csrf\";\nexport const createSession = (user) => {\n    return {\n        type: NEWSESSION,\n        payload: user\n    }\n\n}\n\nexport const removeSession = (userId)=> {\n    return {\n        type: DELETESESSION,\n        userId\n    }\n}\n\nexport const login =(user)=> async(dispatch) => {\n    const {credential,password} = user;\n    const response = await csrfFetch('./api/session',{\n        method:\"POST\",\n        body: JSON.stringify({credential,password})\n    });\n    const data = await response.json();\n    dispatch(createSession(data.user));\n    return response;\n}\nconst initialState = {user:null};\n\nconst sessionReducer = (state=initialState,action)=> {\n    switch (action.type) {\n        case SET_CURRENT_USER:\n            return {...state,user: action.payload}\n        case REMOVE_CURRENT_USER:\n            return{...state,user: null};\n        default:\n            return storeCSRFToken;\n    }\n}\n\nexport default sessionReducer;"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMA,gBAAgB,GAAG,wBAAwB;AACjD,MAAMC,mBAAmB,GAAG,2BAA2B;AACvD,OAAOC,SAAS,MAAM,QAAQ;AAC9B,OAAO,MAAMC,aAAa,GAAIC,IAAI,IAAK;EACnC,OAAO;IACHC,IAAI,EAAEC,UAAU;IAChBC,OAAO,EAAEH;EACb,CAAC;AAEL,CAAC;AAED,OAAO,MAAMI,aAAa,GAAIC,MAAM,IAAI;EACpC,OAAO;IACHJ,IAAI,EAAEK,aAAa;IACnBD;EACJ,CAAC;AACL,CAAC;AAED,OAAO,MAAME,KAAK,GAAGP,IAAI,IAAI,MAAMQ,QAAQ,IAAK;EAC5C,MAAM;IAACC,UAAU;IAACC;EAAQ,CAAC,GAAGV,IAAI;EAClC,MAAMW,QAAQ,GAAG,MAAMb,SAAS,CAAC,eAAe,EAAC;IAC7Cc,MAAM,EAAC,MAAM;IACbC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;MAACN,UAAU;MAACC;IAAQ,CAAC;EAC9C,CAAC,CAAC;EACF,MAAMM,IAAI,GAAG,MAAML,QAAQ,CAACM,IAAI,CAAC,CAAC;EAClCT,QAAQ,CAACT,aAAa,CAACiB,IAAI,CAAChB,IAAI,CAAC,CAAC;EAClC,OAAOW,QAAQ;AACnB,CAAC;AACD,MAAMO,YAAY,GAAG;EAAClB,IAAI,EAAC;AAAI,CAAC;AAEhC,MAAMmB,cAAc,GAAG,SAAAA,CAAA,EAA8B;EAAA,IAA7BC,KAAK,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAACH,YAAY;EAAA,IAACM,MAAM,GAAAH,SAAA,CAAAC,MAAA,OAAAD,SAAA,MAAAE,SAAA;EAC7C,QAAQC,MAAM,CAACvB,IAAI;IACf,KAAKL,gBAAgB;MACjB,OAAO;QAAC,GAAGwB,KAAK;QAACpB,IAAI,EAAEwB,MAAM,CAACrB;MAAO,CAAC;IAC1C,KAAKN,mBAAmB;MACpB,OAAM;QAAC,GAAGuB,KAAK;QAACpB,IAAI,EAAE;MAAI,CAAC;IAC/B;MACI,OAAOyB,cAAc;EAC7B;AACJ,CAAC;AAED,eAAeN,cAAc"},"metadata":{},"sourceType":"module","externalDependencies":[]}