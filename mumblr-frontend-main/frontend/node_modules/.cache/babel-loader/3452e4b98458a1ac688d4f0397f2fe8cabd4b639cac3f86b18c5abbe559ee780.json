{"ast":null,"code":"import _regeneratorRuntime from\"/Users/vincentpham/Documents/GitHub/fullstack/frontend_react/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/vincentpham/Documents/GitHub/fullstack/frontend_react/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/vincentpham/Documents/GitHub/fullstack/frontend_react/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import'./index.css';import React,{useState,useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import*as sessionActions from'../../store/session';import{Redirect}from'react-router-dom';import csrfFetch from'../../store/csrf';import EmailCheck from'./EmailCheck';import PasswordLogin from'./passwordLogin';import PasswordSignUp from'./passwordSignUp';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var LoginForm=function LoginForm(){var dispatch=useDispatch();// grab user info from current logged in user\n// most likely be blank\nvar sessionUser=useSelector(function(state){return state.session.user;});var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),errors=_useState4[0],setErrors=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),emailCheck=_useState6[0],setEmailCheck=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),emailExists=_useState8[0],setEmailExists=_useState8[1];if(sessionUser)return/*#__PURE__*/_jsx(Redirect,{to:\"/\"});var checkEmail=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(email){var response,exists;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return csrfFetch('./api/check-email',{method:\"POST\",body:JSON.stringify(email)});case 2:response=_context.sent;_context.next=5;return response.json();case 5:exists=_context.sent;return _context.abrupt(\"return\",exists);case 7:case\"end\":return _context.stop();}},_callee);}));return function checkEmail(_x){return _ref.apply(this,arguments);};}();// need to move fetch into on email click\nvar onEmailClick=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(email){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return checkEmail(email);case 2:response=_context2.sent;setEmailExists(response);console.log(emailExists);setEmailCheck(true);console.log(emailCheck);case 7:case\"end\":return _context2.stop();}},_callee2);}));return function onEmailClick(_x2){return _ref2.apply(this,arguments);};}();/*#__PURE__*/_jsx(\"ul\",{children:errors.map(function(error){return/*#__PURE__*/_jsx(\"li\",{children:error},error);})});return/*#__PURE__*/ (// <ul>\n//   {errors.map(error => <li key={error}>{error}</li>)}\n// </ul>\n_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"loginModal\",children:[!emailCheck&&/*#__PURE__*/_jsx(EmailCheck,{setEmail:setEmail,onEmailClick:onEmailClick}),emailCheck===true&&emailExists&&/*#__PURE__*/_jsx(PasswordLogin,{email:email}),emailCheck===true&&!emailExists&&/*#__PURE__*/_jsx(PasswordSignUp,{email:email})]})}));};export default LoginForm;","map":{"version":3,"names":["React","useState","useEffect","useDispatch","useSelector","sessionActions","Redirect","csrfFetch","EmailCheck","PasswordLogin","PasswordSignUp","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","LoginForm","dispatch","sessionUser","state","session","user","_useState","_useState2","_slicedToArray","email","setEmail","_useState3","_useState4","errors","setErrors","_useState5","_useState6","emailCheck","setEmailCheck","_useState7","_useState8","emailExists","setEmailExists","to","checkEmail","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","exists","wrap","_callee$","_context","prev","next","method","body","JSON","stringify","sent","json","abrupt","stop","_x","apply","arguments","onEmailClick","_ref2","_callee2","_callee2$","_context2","console","log","_x2","children","map","error","className"],"sources":["/Users/vincentpham/Documents/GitHub/fullstack/frontend_react/frontend/src/components/LoginFormModal/LoginForm.js"],"sourcesContent":["\nimport './index.css'\nimport React,{useState,useEffect} from 'react';\nimport {useDispatch,useSelector} from 'react-redux'\nimport * as sessionActions from '../../store/session';\nimport { Redirect } from 'react-router-dom'\nimport csrfFetch from '../../store/csrf';\nimport EmailCheck from './EmailCheck';\nimport PasswordLogin from './passwordLogin';\nimport PasswordSignUp from './passwordSignUp';\nconst LoginForm = ()=>{\n    const dispatch = useDispatch();\n    // grab user info from current logged in user\n    // most likely be blank\n    const sessionUser = useSelector(state=> state.session.user);\n    const [email,setEmail] = useState('')\n    const [errors,setErrors] = useState([]);\n    const [emailCheck,setEmailCheck] = useState(false);\n    const [emailExists,setEmailExists] = useState(null);\n    if (sessionUser) return <Redirect to=\"/\" />;\n    const checkEmail = async (email) => {\n        const response = await csrfFetch('./api/check-email',{\n            method:\"POST\",\n            body: JSON.stringify(email)\n        });\n        const exists = await response.json();\n        return exists;\n    }\n    // need to move fetch into on email click\n\n    const onEmailClick =async (email)=>{\n        let response = await checkEmail(email);\n        setEmailExists(response);\n        console.log(emailExists);\n        setEmailCheck(true);\n        console.log(emailCheck);\n        \n    };\n\n\n    <ul>\n        {errors.map(error => <li key={error}>{error}</li>)}\n    </ul>\n\n    return (\n        // <ul>\n        //   {errors.map(error => <li key={error}>{error}</li>)}\n        // </ul>\n        <>\n        <div className='loginModal'>\n        {!emailCheck && <EmailCheck setEmail={setEmail} onEmailClick={onEmailClick} />}\n        {emailCheck===true && emailExists && <PasswordLogin email={email}/>}\n        {emailCheck===true && !emailExists && <PasswordSignUp email={email}/>}\n        </div>\n        </>\n    );\n}\n\nexport default LoginForm;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}