{"ast":null,"code":"var _jsxFileName = \"/Users/vincentpham/Documents/mumblr/frontend/src/components/users/UserFollowDashoard.js\",\n  _s = $RefreshSig$();\nimport { useParams } from \"react-router-dom/cjs/react-router-dom.min\";\nimport { useState, useCallback, useEffect, useRef } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport * as followActions from '../../store/follows';\nimport UserFollowShow from \"./UserFollowShow\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst UserFollowDashboard = _ref => {\n  _s();\n  let {\n    type\n  } = _ref;\n  //type will determine if i grab followers or follows \n  const {\n    userid\n  } = useParams;\n  const [usersMap, setUsersMap] = useState([]);\n  const [moreUsers, setMoreUsers] = useState(true);\n  const [pageNumber, setPageNumber] = useState(1);\n  const [loading, setLoading] = useState(true);\n  const observer = useRef();\n  const dispatch = useDispatch();\n  const lastUserRef = useCallback(node => {\n    if (loading) return;\n    if (observer.current) observer.current.disconnect();\n    if (!moreUsers) return;\n    observer.current = new IntersectionObserver(entries => {\n      if (entries[0].isIntersecting && moreUsers) {\n        setPageNumber(state => state + 1);\n      }\n    });\n    if (node) observer.current.observe(node);\n  });\n  useEffect(() => {\n    setUsersMap([]);\n    setLoading(true);\n    if (type === 'follows') {\n      dispatch(getFollows(userid));\n    } else {\n      //fetch followers \n      dispatch(getFollowers(userid));\n    }\n  }, [type]);\n  const followState = useSelector(state => state.follows);\n  useEffect(() => {\n    setLoading(true);\n    setUsersMap(state => {\n      const existingFollowIds = state.map(follow => follow.id);\n      const newFollows = Object.values(followState).filter(follow => !existingFollowIds.includes(follow.id));\n      const newState = [];\n      [...state, ...newFollows].forEach(follow => {\n        newState.push(follow);\n      });\n      return newState;\n    });\n    setLoading(false);\n  }, [pageNumber]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"follow-dash-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"follow-dash-body\",\n        children: usersMap.map((user, index) => {\n          if (index + 1 === usersMap.length) {\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              ref: lastUserRef,\n              className: \"likeslist-container\",\n              children: /*#__PURE__*/_jsxDEV(UserFollowShow, {\n                follow: user,\n                type: type\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 66,\n                columnNumber: 33\n              }, this)\n            }, user.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 65,\n              columnNumber: 29\n            }, this);\n          } else {\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"likeslist-container\",\n              children: /*#__PURE__*/_jsxDEV(UserFollowShow, {\n                follow: user,\n                type: type\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 72,\n                columnNumber: 33\n              }, this)\n            }, user.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 71,\n              columnNumber: 29\n            }, this);\n          }\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n};\n_s(UserFollowDashboard, \"V9tsPz7pGU1M3ciL9N8D4nca+Kg=\", false, function () {\n  return [useDispatch, useSelector];\n});\n_c = UserFollowDashboard;\nexport default UserFollowDashboard;\nvar _c;\n$RefreshReg$(_c, \"UserFollowDashboard\");","map":{"version":3,"names":["useParams","useState","useCallback","useEffect","useRef","useDispatch","useSelector","followActions","UserFollowShow","jsxDEV","_jsxDEV","Fragment","_Fragment","UserFollowDashboard","_ref","_s","type","userid","usersMap","setUsersMap","moreUsers","setMoreUsers","pageNumber","setPageNumber","loading","setLoading","observer","dispatch","lastUserRef","node","current","disconnect","IntersectionObserver","entries","isIntersecting","state","observe","getFollows","getFollowers","followState","follows","existingFollowIds","map","follow","id","newFollows","Object","values","filter","includes","newState","forEach","push","children","className","user","index","length","ref","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/vincentpham/Documents/mumblr/frontend/src/components/users/UserFollowDashoard.js"],"sourcesContent":["import { useParams } from \"react-router-dom/cjs/react-router-dom.min\"\nimport { useState,useCallback,useEffect,useRef } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport * as followActions from '../../store/follows';\nimport UserFollowShow from \"./UserFollowShow\";\n\nconst UserFollowDashboard = ({type}) =>{\n    //type will determine if i grab followers or follows \n    const {userid} = useParams\n    const [usersMap,setUsersMap] = useState([]);\n    const [moreUsers,setMoreUsers] = useState(true);\n    const [pageNumber,setPageNumber] = useState(1);\n    const [loading,setLoading]=useState(true);\n    const observer = useRef();\n    const dispatch = useDispatch();\n\n    const lastUserRef = useCallback(node=>{\n        if(loading) return;\n        if (observer.current) observer.current.disconnect();\n        if(!moreUsers) return;\n\n        observer.current = new IntersectionObserver(entries=>{\n            if (entries[0].isIntersecting && moreUsers) {\n                setPageNumber(state=> state+1);\n            }\n        })\n        if (node)observer.current.observe(node);\n    })\n    useEffect(()=>{\n        setUsersMap([]);\n        setLoading(true);\n        if (type==='follows'){\n            dispatch(getFollows(userid));\n        } else {\n            //fetch followers \n            dispatch(getFollowers(userid));\n        }\n    },[type])\n\n    const followState = useSelector(state=> state.follows);\n    useEffect(()=>{\n        setLoading(true);\n        setUsersMap(state=>{\n          \n            const existingFollowIds = state.map((follow)=>follow.id)\n            const newFollows = Object.values(followState).filter(\n                (follow)=> !existingFollowIds.includes(follow.id)\n            )\n            const newState=[];\n            [...state,...newFollows].forEach((follow)=>{\n                newState.push(follow)\n            })\n            return newState;\n        })\n        setLoading(false);\n    },[pageNumber])\n\n    return(\n        <>\n        <div className='follow-dash-container'>\n            <div className='follow-dash-body'>\n                {usersMap.map((user,index)=>{\n                    if (index+1===usersMap.length){\n                        return (\n                            <div ref={lastUserRef} key={user.id} className='likeslist-container'>\n                                <UserFollowShow follow={user} type={type} />\n                            </div>\n                        )\n                    } else {\n                        return (\n                            <div key={user.id} className='likeslist-container'>\n                                <UserFollowShow follow={user} type={type} />\n                            </div>\n                        )\n                    }\n                    \n                })\n                }\n\n            </div>\n\n        </div>\n        </>\n    )\n}\n\nexport default UserFollowDashboard;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}