{"ast":null,"code":"var _jsxFileName = \"/Users/vincentpham/Documents/mumblr/frontend/src/components/users/UserFollowDashoard.js\",\n  _s = $RefreshSig$();\nimport { useParams } from \"react-router-dom/cjs/react-router-dom.min\";\nimport { useState, useCallback, useEffect, useRef } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport * as followActions from '../../store/follows';\nimport FollowShow from \"./UserFollowShow\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst UserFollowDashboard = _ref => {\n  _s();\n  let {\n    type\n  } = _ref;\n  //type will determine if i grab followers or follows \n  const {\n    userid\n  } = useParams();\n  const [usersMap, setUsersMap] = useState([]);\n  const [moreUsers, setMoreUsers] = useState(true);\n  const [pageNumber, setPageNumber] = useState(1);\n  const [loading, setLoading] = useState(true);\n  const observer = useRef();\n  const dispatch = useDispatch();\n  const lastUserRef = useCallback(node => {\n    if (loading) return;\n    if (observer.current) observer.current.disconnect();\n    if (!moreUsers) return;\n    observer.current = new IntersectionObserver(entries => {\n      if (entries[0].isIntersecting && moreUsers) {\n        setPageNumber(state => state + 1);\n      }\n    });\n    if (node) observer.current.observe(node);\n  });\n  useEffect(() => {\n    setUsersMap([]);\n    setLoading(true);\n    // dispatch(followActions.clearFollow());\n    if (type === 'follows') {\n      dispatch(followActions.getFollows(userid));\n    } else {\n      //fetch followers \n      dispatch(followActions.getFollowers(userid));\n    }\n  }, [type]);\n  let followState = useSelector(state => state.follows);\n  let follows;\n  useEffect(() => {\n    if (type === 'follows') {\n      follows = Object.values(followState).filter(follow => {\n        return follow.followerId === userid;\n      });\n    } else {\n      follows = Object.values(followState).filter(follow => {\n        follow.userId === userid;\n      });\n    }\n  }, [followState, dispatch]);\n  useEffect(() => {\n    setLoading(true);\n    setUsersMap(state => {\n      const existingFollowIds = state.map(follow => follow.id);\n      const newFollows = Object.values(followState).filter(follow => !existingFollowIds.includes(follow.id));\n      const newState = [];\n      [...state, ...newFollows].forEach(follow => {\n        newState.push(follow);\n      });\n      return newState;\n    });\n    setLoading(false);\n  }, [pageNumber]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"follow-dash-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"follow-dash-body\",\n        children: follows.map((follow, index) => {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            ref: lastUserRef,\n            className: \"likeslist-container\",\n            children: /*#__PURE__*/_jsxDEV(FollowShow, {\n              id: type === 'follows' ? follow.userId : follow.followerId,\n              type: type\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 25\n            }, this)\n          }, follow.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 21\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n};\n_s(UserFollowDashboard, \"WUpBymmFFCRZ+Gsy/F71PluqFs4=\", false, function () {\n  return [useParams, useDispatch, useSelector];\n});\n_c = UserFollowDashboard;\nexport default UserFollowDashboard;\nvar _c;\n$RefreshReg$(_c, \"UserFollowDashboard\");","map":{"version":3,"names":["useParams","useState","useCallback","useEffect","useRef","useDispatch","useSelector","followActions","FollowShow","jsxDEV","_jsxDEV","Fragment","_Fragment","UserFollowDashboard","_ref","_s","type","userid","usersMap","setUsersMap","moreUsers","setMoreUsers","pageNumber","setPageNumber","loading","setLoading","observer","dispatch","lastUserRef","node","current","disconnect","IntersectionObserver","entries","isIntersecting","state","observe","getFollows","getFollowers","followState","follows","Object","values","filter","follow","followerId","userId","existingFollowIds","map","id","newFollows","includes","newState","forEach","push","children","className","index","ref","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/vincentpham/Documents/mumblr/frontend/src/components/users/UserFollowDashoard.js"],"sourcesContent":["import { useParams } from \"react-router-dom/cjs/react-router-dom.min\"\nimport { useState,useCallback,useEffect,useRef } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport * as followActions from '../../store/follows';\nimport FollowShow from \"./UserFollowShow\";\n\nconst UserFollowDashboard = ({type}) =>{\n    //type will determine if i grab followers or follows \n    const {userid} = useParams();\n    const [usersMap,setUsersMap] = useState([]);\n    const [moreUsers,setMoreUsers] = useState(true);\n    const [pageNumber,setPageNumber] = useState(1);\n    const [loading,setLoading]=useState(true);\n    const observer = useRef();\n    const dispatch = useDispatch();\n    const lastUserRef = useCallback(node=>{\n        if(loading) return;\n        if (observer.current) observer.current.disconnect();\n        if(!moreUsers) return;\n\n        observer.current = new IntersectionObserver(entries=>{\n            if (entries[0].isIntersecting && moreUsers) {\n                setPageNumber(state=> state+1);\n            }\n        })\n        if (node)observer.current.observe(node);\n    })\n    useEffect(()=>{\n        setUsersMap([]);\n        setLoading(true);\n        // dispatch(followActions.clearFollow());\n        if (type==='follows'){\n            dispatch(followActions.getFollows(userid));\n        } else {\n            //fetch followers \n            dispatch(followActions.getFollowers(userid));\n        }\n    },[type])\n\n    let followState = useSelector(state=> state.follows);\n    let follows;\n    useEffect(()=>{\n        if (type==='follows'){\n            follows = Object.values(followState).filter((follow)=>{\n                return follow.followerId === userid;\n            })\n        } else {\n            follows = Object.values(followState).filter((follow)=>{\n                follow.userId === userid;\n            })\n        }\n    },[followState,dispatch])\n    useEffect(()=>{\n        setLoading(true);\n        setUsersMap(state=>{\n          \n            const existingFollowIds = state.map((follow)=>follow.id)\n            const newFollows = Object.values(followState).filter(\n                (follow)=> !existingFollowIds.includes(follow.id)\n            )\n            const newState=[];\n            [...state,...newFollows].forEach((follow)=>{\n                newState.push(follow)\n            })\n            return newState;\n        })\n        setLoading(false);\n    },[pageNumber])\n    \n    return(\n        <>\n        <div className='follow-dash-container'>\n            <div className='follow-dash-body'>\n                {follows.map((follow,index)=>{\n                    return(\n                    <div ref={lastUserRef} key={follow.id} className='likeslist-container'>\n                        <FollowShow id={type==='follows' ? follow.userId : follow.followerId} type={type} />\n                    </div>\n                    )\n            \n                    \n                })\n                }\n\n            </div>\n\n        </div>\n        </>\n    )\n}\n\nexport default UserFollowDashboard;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}