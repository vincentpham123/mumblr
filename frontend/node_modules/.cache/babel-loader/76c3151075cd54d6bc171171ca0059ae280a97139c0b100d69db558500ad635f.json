{"ast":null,"code":"import _regeneratorRuntime from\"/Users/vincentpham/Documents/mumblr/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/vincentpham/Documents/mumblr/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/vincentpham/Documents/mumblr/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{useDispatch,useSelector}from'react-redux';import*as sessionActions from'../../store/session';import{Redirect}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SignupFormPage=function SignupFormPage(){var dispatch=useDispatch();var sessionUser=useSelector(function(state){return state.session.user;});var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),username=_useState4[0],setUsername=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),confirmPassword=_useState8[0],setConfirmPassword=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),errors=_useState10[0],setErrors=_useState10[1];if(sessionUser)return/*#__PURE__*/_jsx(Redirect,{to:\"/\"});var handleSubmit=function handleSubmit(event){event.preventDefault();setErrors([]);if(password===confirmPassword){return dispatch(sessionActions.signup({email:email,username:username,password:password})).catch(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(res){var _data;var data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return res.clone().json();case 3:data=_context.sent;_context.next=11;break;case 6:_context.prev=6;_context.t0=_context[\"catch\"](0);_context.next=10;return res.text();case 10:data=_context.sent;case 11:if((_data=data)!==null&&_data!==void 0&&_data.errors)setErrors(data.errors);else if(data)setErrors([data]);else setErrors([res.statusText]);case 12:case\"end\":return _context.stop();}},_callee,null,[[0,6]]);}));return function(_x){return _ref.apply(this,arguments);};}());}return setErrors(['Confirm Password field must be the same as the Password field']);};return/*#__PURE__*/_jsxs(\"form\",{id:\"login-form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"ul\",{children:errors.map(function(error){return/*#__PURE__*/_jsx(\"li\",{children:error},error);})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Email\",value:email,onChange:function onChange(event){return setEmail(event.target.value);},required:true}),\" \",/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"username\",value:username,onChange:function onChange(event){return setUsername(event.target.value);},required:true}),\" \",/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"password\",value:password,onChange:function onChange(event){return setPassword(event.target.value);},required:true}),\" \",/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"confirm password\",value:confirmPassword,onChange:function onChange(event){return setConfirmPassword(event.target.value);},required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Sign Up\"})]});};export default SignupFormPage;","map":{"version":3,"names":["React","useState","useDispatch","useSelector","sessionActions","Redirect","jsx","_jsx","jsxs","_jsxs","SignupFormPage","dispatch","sessionUser","state","session","user","_useState","_useState2","_slicedToArray","email","setEmail","_useState3","_useState4","username","setUsername","_useState5","_useState6","password","setPassword","_useState7","_useState8","confirmPassword","setConfirmPassword","_useState9","_useState10","errors","setErrors","to","handleSubmit","event","preventDefault","signup","catch","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","_data","data","wrap","_callee$","_context","prev","next","clone","json","sent","t0","text","statusText","stop","_x","apply","arguments","id","onSubmit","children","map","error","type","placeholder","value","onChange","target","required"],"sources":["/Users/vincentpham/Documents/mumblr/frontend/src/components/SignupFormPage/index.js"],"sourcesContent":["\nimport React,{useState} from 'react';\nimport {useDispatch,useSelector} from 'react-redux'\nimport * as sessionActions from '../../store/session';\nimport { Redirect } from 'react-router-dom'\n\nconst SignupFormPage = () => {\n    const dispatch = useDispatch();\n    const sessionUser = useSelector(state => state.session.user);\n    const [email, setEmail] = useState('');\n    const [username, setUsername] = useState('');\n    const [password,setPassword] = useState('');\n    const [confirmPassword,setConfirmPassword] = useState('');\n    const [errors,setErrors] = useState([]);\n    if (sessionUser) return <Redirect to='/' />\n\n    const handleSubmit = (event) => {\n        event.preventDefault();\n        setErrors([]);\n        if(password===confirmPassword){\n        return dispatch(sessionActions.signup({email,username,password}))\n            .catch(async (res) => {\n                let data;\n                try {\n                    data=await res.clone().json();\n                }\n                catch {\n                    data = await res.text();\n                }\n\n                if (data?.errors) setErrors(data.errors);\n                else if (data) setErrors([data]);\n                else setErrors([res.statusText]);\n            });\n        }\n        return setErrors(['Confirm Password field must be the same as the Password field']);\n    };\n\n    return (\n        <form id='login-form' onSubmit={handleSubmit}>\n            <ul>\n                {errors.map(error => <li key={error}>{error}</li>)}\n            </ul>\n            <input type='text' placeholder='Email' \n            value={email} onChange={event=>setEmail(event.target.value)} required\n            /> <input type='text' placeholder='username' \n            value={username} onChange={event=>setUsername(event.target.value)} required\n            /> <input type='password' placeholder=\"password\" \n            value={password} onChange={event=>setPassword(event.target.value)} required\n            /> <input type='password' placeholder=\"confirm password\" \n            value={confirmPassword} onChange={event=>setConfirmPassword(event.target.value)} required\n            /> \n            <button type=\"submit\">Sign Up</button>\n        \n        </form>\n    )\n\n}\nexport default SignupFormPage;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}