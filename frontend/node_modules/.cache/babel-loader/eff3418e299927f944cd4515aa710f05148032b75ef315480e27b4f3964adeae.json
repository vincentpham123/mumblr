{"ast":null,"code":"import csrfFetch, { storeCSRFToken } from \"./csrf\";\n\n// consts \n\nconst RECEIVE_POST = \"api/RECEIVE_POST\";\nconst RECEIVE_POSTS = \"api/RECEIVE_POSTS\";\nconst REMOVE_POST = 'api/UPDATE_POST';\nconst RECEIVE_USER_POST = \"api/USERNAME/RECEIVE_POSTS\";\n\n// action types\n\nconst receiveUserPost = posts => ({\n  type: RECEIVE_USER_POST,\n  posts\n});\nconst receivePost = post => ({\n  type: RECEIVE_POST,\n  post\n});\nconst receivePosts = posts => ({\n  type: RECEIVE_POSTS,\n  posts\n});\nconst deletePost = postId => ({\n  type: REMOVE_POST,\n  postId\n});\n\n// thunk actions\nexport const fetchUserPosts = userId => async dispatch => {\n  let response = await fetch(`users/${userId}`);\n};\nexport const fetchPosts = () => async dispatch => {\n  let response = await fetch('/api/posts');\n  if (response.ok) {\n    const posts = await response.json();\n    dispatch(receivePosts(posts));\n    return posts;\n  }\n};\nexport const fetchPost = postId => async dispatch => {\n  let response = await fetch(`/api/posts/${postId}`);\n  if (response.ok) {\n    const post = await response.json();\n    dispatch(receivePost(post));\n    return post;\n  }\n};\nexport const createPost = post => async dispatch => {\n  console.log(post);\n  const newPost = await csrfFetch('/api/posts', {\n    method: 'POST',\n    body: post\n  });\n  if (newPost.ok) {\n    const data = await newPost.json();\n    dispatch(receivePost(data));\n    return data;\n  }\n};\nexport const updatePost = post => async dispatch => {\n  const {\n    title,\n    body,\n    author_id\n  } = post;\n  const post = await csrfFetch('/api/posts', {\n    method: 'PATCH',\n    body: JSON.stringify({\n      title,\n      body,\n      author_id\n    })\n  });\n  if (post.ok) {\n    const data = await post.json();\n    dispatch(receivePost(data));\n    return data;\n  }\n};\nexport const removePost = postId => async dispatch => {\n  const post = await csrfFetch(`/api/posts/${postId}`, {\n    method: 'DELETE'\n  });\n  if (post.ok) {\n    dispatch(deletePost(postId));\n  }\n};\n\n// posts reducer\n\nconst postsReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  const newState = {\n    ...state\n  };\n  switch (action.type) {\n    case RECEIVE_POST:\n      newState[action.post.id] = action.post;\n      return newState;\n    case RECEIVE_POSTS:\n      return {\n        ...action.posts\n      };\n    case REMOVE_POST:\n      delete newState[action.postId];\n      return newState;\n    default:\n      return newState;\n  }\n};\nexport default postsReducer;","map":{"version":3,"names":["csrfFetch","storeCSRFToken","RECEIVE_POST","RECEIVE_POSTS","REMOVE_POST","RECEIVE_USER_POST","receiveUserPost","posts","type","receivePost","post","receivePosts","deletePost","postId","fetchUserPosts","userId","dispatch","response","fetch","fetchPosts","ok","json","fetchPost","createPost","console","log","newPost","method","body","data","updatePost","title","author_id","JSON","stringify","removePost","postsReducer","state","arguments","length","undefined","action","newState","id"],"sources":["/Users/vincentpham/Documents/mumblr/frontend/src/store/posts.js"],"sourcesContent":["import csrfFetch, { storeCSRFToken } from \"./csrf\";\n\n// consts \n\nconst RECEIVE_POST = \"api/RECEIVE_POST\";\nconst RECEIVE_POSTS = \"api/RECEIVE_POSTS\";\nconst REMOVE_POST = 'api/UPDATE_POST';\nconst RECEIVE_USER_POST = \"api/USERNAME/RECEIVE_POSTS\";\n\n// action types\n\nconst receiveUserPost = (posts) => ({\n    type: RECEIVE_USER_POST,\n    posts\n})\nconst receivePost = (post) => ({\n    type: RECEIVE_POST,\n    post \n})\n\nconst receivePosts = (posts) => ({\n    type: RECEIVE_POSTS,\n    posts\n})\n\nconst deletePost = (postId) =>({\n    type: REMOVE_POST,\n    postId\n})\n\n\n// thunk actions\nexport const fetchUserPosts = (userId) => async(dispatch)=>{\n    let response = await fetch(`users/${userId}`)\n}\nexport const fetchPosts = () => async(dispatch) =>{\n    let response = await fetch('/api/posts');\n    if (response.ok){\n    const posts = await response.json();\n    dispatch(receivePosts(posts));\n    return posts\n    }\n}\n\nexport const fetchPost = (postId) => async(dispatch)=>{\n    let response = await fetch(`/api/posts/${postId}`);\n\n    if (response.ok){\n    const post = await response.json();\n    dispatch(receivePost(post));\n    return post;\n    }\n} \n\nexport const createPost = (post) => async(dispatch) =>{\n    console.log(post);\n    const newPost = await csrfFetch('/api/posts',{\n        method:'POST',\n        body: post\n    });\n    if (newPost.ok){\n    const data = await newPost.json();\n    dispatch(receivePost(data));\n    return data;\n    }\n}\n\nexport const updatePost = post=> async(dispatch) => {\n    const{title,body,author_id} = post;\n    const post = await csrfFetch('/api/posts',{\n        method:'PATCH',\n        body: JSON.stringify({title,body,author_id})\n    });\n    if (post.ok){\n    const data = await post.json();\n    dispatch(receivePost(data));\n    return data;\n    }\n}\n\nexport const removePost = postId => async dispatch =>{\n    const post = await csrfFetch(`/api/posts/${postId}`, {\n        method: 'DELETE'\n    });\n    if (post.ok){\n        dispatch(deletePost(postId))\n    }\n};\n\n// posts reducer\n\nconst postsReducer = (state={},action)=>{\n    const newState={...state};\n    switch (action.type) {\n        case RECEIVE_POST:\n            newState[action.post.id] = action.post;\n            return newState;\n        case RECEIVE_POSTS:\n            return {...action.posts};\n        case REMOVE_POST:\n            delete newState[action.postId];\n            return newState;\n        default:\n            return newState;\n    }\n}\nexport default postsReducer;\n\n    \n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}