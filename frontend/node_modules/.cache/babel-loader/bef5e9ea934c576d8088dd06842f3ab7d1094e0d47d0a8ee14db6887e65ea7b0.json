{"ast":null,"code":"import _regeneratorRuntime from\"/Users/vincentpham/Documents/GitHub/fullstack/frontend_react/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/vincentpham/Documents/GitHub/fullstack/frontend_react/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/vincentpham/Documents/GitHub/fullstack/frontend_react/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from\"react\";import'./index.css';import*as sessionActions from'../../store/session';import csrfFetch from\"../../store/csrf\";import{Redirect}from\"react-router-dom\";import{useDispatch}from\"react-redux\";import'./passwordLogin.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var PasswordLogin=function PasswordLogin(_ref){var email=_ref.email;var dispatch=useDispatch();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),password=_useState2[0],setPassword=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),errors=_useState4[0],setErrors=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),buttonColor=_useState6[0],setButtonColor=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),fontColor=_useState8[0],setFontColor=_useState8[1];useEffect(function(){if(password.length){setButtonColor('white');setFontColor('black');}else{setButtonColor('');setFontColor('');}},[password]);var handleSubmit=function handleSubmit(event){event.preventDefault();setErrors([]);return dispatch(sessionActions.login({email:email,password:password})).catch(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(res){var _data;var data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return res.clone().json();case 3:data=_context.sent;_context.next=11;break;case 6:_context.prev=6;_context.t0=_context[\"catch\"](0);_context.next=10;return res.text();case 10:data=_context.sent;case 11:if((_data=data)!==null&&_data!==void 0&&_data.errors)setErrors(data.errors);else if(data)setErrors([data]);else setErrors([res.statusText]);case 12:case\"end\":return _context.stop();}},_callee,null,[[0,6]]);}));return function(_x){return _ref2.apply(this,arguments);};}());};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"passwordlogin-box\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"password-title\",children:\"mumblr\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"password-form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"div\",{className:\"password-instructions\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Welcome back to your corner of the internet.\"})}),/*#__PURE__*/_jsx(\"input\",{className:\"password-text\",type:\"password\",placeholder:\"Password\",value:password,onChange:function onChange(event){return setPassword(event.target.value);},required:true}),/*#__PURE__*/_jsxs(\"button\",{style:{backgroundColor:\"\".concat(buttonColor),color:\"\".concat(fontColor)},className:\"password-button\",type:\"submit\",children:[\"Log in\",/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-arrow-right\",style:{border:'none',color:\"\".concat(fontColor)}})]})]}),/*#__PURE__*/_jsx(\"ul\",{children:errors.map(function(error){return/*#__PURE__*/_jsx(\"li\",{children:error},error);})})]})});};export default PasswordLogin;","map":{"version":3,"names":["useState","useEffect","sessionActions","csrfFetch","Redirect","useDispatch","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","PasswordLogin","_ref","email","dispatch","_useState","_useState2","_slicedToArray","password","setPassword","_useState3","_useState4","errors","setErrors","_useState5","_useState6","buttonColor","setButtonColor","_useState7","_useState8","fontColor","setFontColor","length","handleSubmit","event","preventDefault","login","catch","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","_data","data","wrap","_callee$","_context","prev","next","clone","json","sent","t0","text","statusText","stop","_x","apply","arguments","children","className","onSubmit","type","placeholder","value","onChange","target","required","style","backgroundColor","concat","color","border","map","error"],"sources":["/Users/vincentpham/Documents/GitHub/fullstack/frontend_react/frontend/src/components/LoginFormModal/passwordLogin.js"],"sourcesContent":["import { useState, useEffect} from \"react\"\nimport './index.css'\nimport * as sessionActions from '../../store/session';\nimport csrfFetch from \"../../store/csrf\";\nimport { Redirect } from \"react-router-dom\";\nimport { useDispatch } from \"react-redux\";\nimport './passwordLogin.css';\nconst PasswordLogin = ({email}) =>{\n    const dispatch = useDispatch();\n    const [password,setPassword] = useState('');\n    const [errors,setErrors] = useState([]);\n    const [buttonColor,setButtonColor] = useState('');\n    const [fontColor,setFontColor] = useState('');\n    useEffect(()=>{\n        if (password.length){\n            setButtonColor('white');\n            setFontColor('black');\n        } else {\n            setButtonColor('');\n            setFontColor('');\n        }\n    },[password]);\n    const handleSubmit = (event) => {\n        event.preventDefault();\n\n        setErrors([]);\n        return dispatch(sessionActions.login({email, password}))\n            .catch(async (res) => {\n                let data;\n                try {\n                    data = await res.clone().json();\n                } catch {\n                    data = await res.text();\n                }\n\n                if (data?.errors) setErrors(data.errors);\n                else if (data) setErrors([data]);\n                else setErrors([res.statusText]);\n\n            });\n    }\n    return (\n        <>\n             <div className='passwordlogin-box'>\n                <div className='password-title'>mumblr</div>\n                <form className = 'password-form' onSubmit={handleSubmit}>\n                <div className='password-instructions'><p>Welcome back to your corner of the internet.</p></div>\n                <input className= 'password-text' type='password' placeholder='Password' \n                    value={password} onChange={event=>setPassword(event.target.value)} required\n                    />\n                \n                    <button style={{ backgroundColor:`${buttonColor}`,color:`${fontColor}`}} className='password-button' type='submit' >\n                    Log in<i className=\"fa-solid fa-arrow-right\" style={{border: 'none', color: `${fontColor}` }}></i> \n                    </button>\n                </form>\n                <ul>\n                    {errors.map(error => <li key={error}>{error}</li>)}\n                </ul>\n            </div>\n        </>\n    )\n\n}\n\nexport default PasswordLogin;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}