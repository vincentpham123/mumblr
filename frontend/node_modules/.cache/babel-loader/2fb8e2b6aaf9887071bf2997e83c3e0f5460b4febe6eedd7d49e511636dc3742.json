{"ast":null,"code":"var _jsxFileName = \"/Users/vincentpham/Documents/mumblr/frontend/src/components/users/UserFollowDashoard.js\",\n  _s = $RefreshSig$();\nimport { useParams } from \"react-router-dom/cjs/react-router-dom.min\";\nimport { useState, useCallback, useEffect, useRef } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport * as followActions from '../../store/follows';\nimport FollowShow from \"./UserFollowShow\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst UserFollowDashboard = _ref => {\n  _s();\n  let {\n    type\n  } = _ref;\n  //type will determine if i grab followers or follows \n  const {\n    userid\n  } = useParams();\n  const [usersMap, setUsersMap] = useState([]);\n  const [moreUsers, setMoreUsers] = useState(true);\n  const [pageNumber, setPageNumber] = useState(1);\n  const [loading, setLoading] = useState(true);\n  const observer = useRef();\n  const dispatch = useDispatch();\n  const lastUserRef = useCallback(node => {\n    if (loading) return;\n    if (observer.current) observer.current.disconnect();\n    if (!moreUsers) return;\n    observer.current = new IntersectionObserver(entries => {\n      if (entries[0].isIntersecting && moreUsers) {\n        setPageNumber(state => state + 1);\n      }\n    });\n    if (node) observer.current.observe(node);\n  });\n  useEffect(() => {\n    setUsersMap([]);\n    setLoading(true);\n    // dispatch(followActions.clearFollow());\n    if (type === 'follows') {\n      dispatch(followActions.getFollows(userid));\n    } else {\n      //fetch followers \n      dispatch(followActions.getFollowers(userid));\n    }\n  }, [type]);\n  let followState = useSelector(state => state.follows);\n  let follows;\n  useEffect(() => {\n    if (type === 'follows') {\n      setUsersMap(Object.values(followState).filter(follow => {\n        return follow.followerId === userid;\n      }));\n    } else {\n      setUsersMap(Object.values(followState).filter(follow => {\n        return follow.userId === userid;\n      }));\n    }\n  }, [followState]);\n  if (!follows) return null;\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"follow-dash-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"follow-dash-body\",\n        children: follows.map((follow, index) => {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            ref: lastUserRef,\n            className: \"likeslist-container\",\n            children: /*#__PURE__*/_jsxDEV(FollowShow, {\n              id: type === 'follows' ? follow.userId : follow.followerId,\n              type: type\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 63,\n              columnNumber: 25\n            }, this)\n          }, follow.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 21\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n};\n_s(UserFollowDashboard, \"NrVfqhkqg3qveaXsr9SbEQiXYvI=\", false, function () {\n  return [useParams, useDispatch, useSelector];\n});\n_c = UserFollowDashboard;\nexport default UserFollowDashboard;\nvar _c;\n$RefreshReg$(_c, \"UserFollowDashboard\");","map":{"version":3,"names":["useParams","useState","useCallback","useEffect","useRef","useDispatch","useSelector","followActions","FollowShow","jsxDEV","_jsxDEV","Fragment","_Fragment","UserFollowDashboard","_ref","_s","type","userid","usersMap","setUsersMap","moreUsers","setMoreUsers","pageNumber","setPageNumber","loading","setLoading","observer","dispatch","lastUserRef","node","current","disconnect","IntersectionObserver","entries","isIntersecting","state","observe","getFollows","getFollowers","followState","follows","Object","values","filter","follow","followerId","userId","children","className","map","index","ref","id","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/vincentpham/Documents/mumblr/frontend/src/components/users/UserFollowDashoard.js"],"sourcesContent":["import { useParams } from \"react-router-dom/cjs/react-router-dom.min\"\nimport { useState,useCallback,useEffect,useRef } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport * as followActions from '../../store/follows';\nimport FollowShow from \"./UserFollowShow\";\n\nconst UserFollowDashboard = ({type}) =>{\n    //type will determine if i grab followers or follows \n    const {userid} = useParams();\n    const [usersMap,setUsersMap] = useState([]);\n    const [moreUsers,setMoreUsers] = useState(true);\n    const [pageNumber,setPageNumber] = useState(1);\n    const [loading,setLoading]=useState(true);\n    const observer = useRef();\n    const dispatch = useDispatch();\n    const lastUserRef = useCallback(node=>{\n        if(loading) return;\n        if (observer.current) observer.current.disconnect();\n        if(!moreUsers) return;\n\n        observer.current = new IntersectionObserver(entries=>{\n            if (entries[0].isIntersecting && moreUsers) {\n                setPageNumber(state=> state+1);\n            }\n        })\n        if (node)observer.current.observe(node);\n    })\n    useEffect(()=>{\n        setUsersMap([]);\n        setLoading(true);\n        // dispatch(followActions.clearFollow());\n        if (type==='follows'){\n            dispatch(followActions.getFollows(userid));\n        } else {\n            //fetch followers \n            dispatch(followActions.getFollowers(userid));\n        }\n    },[type])\n\n    let followState = useSelector(state=> state.follows);\n    let follows;\n    useEffect(()=>{\n        if (type==='follows'){\n            setUsersMap(Object.values(followState).filter((follow)=>{\n                return follow.followerId === userid;\n            }))\n        } else {\n            setUsersMap( Object.values(followState).filter((follow)=>{\n                return follow.userId === userid;\n            }))\n        }\n    },[followState])\n    if(!follows) return null;\n    \n    \n    return(\n        <>\n        <div className='follow-dash-container'>\n            <div className='follow-dash-body'>\n                {follows.map((follow,index)=>{\n                    return(\n                    <div ref={lastUserRef} key={follow.id} className='likeslist-container'>\n                        <FollowShow id={type==='follows' ? follow.userId : follow.followerId} type={type} />\n                    </div>\n                    )\n            \n                    \n                })\n                }\n\n            </div>\n\n        </div>\n        </>\n    )\n}\n\nexport default UserFollowDashboard;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}